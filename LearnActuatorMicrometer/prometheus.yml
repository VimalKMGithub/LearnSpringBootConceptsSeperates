#global:
#  scrape_interval: 15s
#
#scrape_configs:
#  # JOB 1: Prometheus scraping itself (NEEDS PASSWORD)
#  # Since you enabled Basic Auth on the UI, Prometheus now needs a password
#  # just to talk to itself.
#  - job_name: 'prometheus'
#    static_configs:
#      - targets: [ 'localhost:9090' ]
#    basic_auth:
#      username: admin
#      password: password123
#
#  # JOB 2: Scraping your Spring Boot App (Usually NO PASSWORD)
#  # This assumes your Actuator endpoint is open and doesn't require login.
#  - job_name: 'spring-boot-app'
#    metrics_path: '/actuator/prometheus'
#    static_configs:
#      - targets: [ 'host.docker.internal:8761' ]
#        # Note: Use 'host.docker.internal' if the app is running on your laptop (outside Docker).
#        # If the app is also in Docker Compose, use its service name (e.g., 'myapp:8080').


## prometheus.yml.template
#global:
#  scrape_interval: 15s
#
#scrape_configs:
#  # JOB 1: Prometheus scraping itself (Using the Placeholder)
#  - job_name: 'prometheus'
#    static_configs:
#      - targets: ['localhost:9090']
#    basic_auth:
#      username: admin
#      password: PASSWORD_PLACEHOLDER  # <--- This gets replaced by the script
#
#  # JOB 2: Scraping your Spring Boot App (MUST BE INCLUDED HERE)
#  - job_name: 'spring-boot-app'
#    metrics_path: '/actuator/prometheus'
#    static_configs:
#      - targets: ['host.docker.internal:8761']

















#global:
#  scrape_interval: 15s
#
#scrape_configs:
#  # ----------------------------------------------------------------
#  # JOB 1: Prometheus (Self-Monitoring)
#  # ----------------------------------------------------------------
#  - job_name: 'prometheus'
#    static_configs:
#      - targets: ['localhost:9090']
#    basic_auth:
#      username: admin
#      password: PASSWORD_PLACEHOLDER
#
#  # ----------------------------------------------------------------
#  # JOB 2: Eureka Server (STATIC SCRAPE)
#  # We scrape this manually because Eureka usually doesn't register itself.
#  # ----------------------------------------------------------------
#  - job_name: 'eureka-server'
#    metrics_path: '/actuator/prometheus'
#    static_configs:
#      - targets: ['host.docker.internal:8761']
#        # If Eureka is in Docker, use its container name: 'eureka-server:8761'
#    basic_auth:
#      # If you added security to Eureka, put it here.
#      # Often Eureka is left open or uses the same admin credentials.
#      username: myapp_admin
#      password: myapp_password123
#
#  # ----------------------------------------------------------------
#  # JOB 3: "The Rest" (Gateway + Microservices) - VIA DISCOVERY
#  # ----------------------------------------------------------------
#  - job_name: 'eureka-microservices'
#    eureka_sd_configs:
#      - server: http://host.docker.internal:8761/eureka
#
#    basic_auth:
#      username: myapp_admin
#      password: myapp_password123
#
#    relabel_configs:
#      # 1. Correct the path to /actuator/prometheus
#      - source_labels: [__metrics_path__]
#        target_label: __metrics_path__
#        replacement: /actuator/prometheus
#
#      # 2. (Optional) Filter OUT Eureka if it accidentally shows up here
#      # so you don't scrape it twice (once in Job 2, once here).
#      - source_labels: [__meta_eureka_app_name]
#        action: drop
#        regex: EUREKA-SERVER